# Overview

There are three methods for executing CodeInsights: via command line, by using a configuration file within an existing repository, or through NodeJS integration.

The ideal method depends on your specific requirements.

* To run CodeInsights for a designated repository, a custom configuration file in that repo is the optimal approach.
* For a quick exploration or CI, the command line interface (CLI) is the most efficient choice.
* For integration with your own code, utilizing the NodeJS library is the best solution.

## Usage in an existing repository

First, create a configuration file called `codeinsights.config.ts` in the root of your repository (`.js` and `.json` files are also supported)

Then, run the following command:

```bash
$ npx @codeinsights/js
```

## Usage from command line
```bash
$ npx @codeinsights/js@latest --repoPath "/path/to/repo"
```

> --repoPath can either be an absolute path to the repo, or a Github URL

## Usage from NodeJS

First, install the package:

```bash
$ npm install @codeinsights/js
```

Then, call the init function with the repository URL, or path:
```typescript
import { init } from "@codeinsights/js/lib/src/api";

 const result = await init({
    repoPath: url
  })
}
```

### Output Example

```json
{
  "parsingErrors": "[]",
  "results": [
    {
      "plugin": {
        "name": "TSFilePlugin",
        ...
      },
      "data": [
        {
          "baseInfo": {
            "path": "user.component.ts",
            "type": "file",
            "labels": {
              "filePath": "src/user/user.component.ts",
              "fileName": "user.component.ts"
            },
            "metrics": {
              "fileLinesOfCode": 53
            }
          },
          "analyzed": {
            "type": "function",
            "path": "src/user/user.component.ts",
            "metrics": {
              "loc": 15
            },
            "labels": {
              "functionType": "ClassMethod",
              "name": "ngOnInit"
            }
          }
        }
        ...
      ]
    }
  ]
}
```
